{"is_source_file": true, "format": "Python", "description": "This file contains test cases for the PDFKnowledgeBase class and related components, including setup fixtures, asynchronous and synchronous tests, and various filtering scenarios within the context of a knowledge base system. It uses pytest for testing and interacts with external modules such as agno.agent, agno.knowledge.pdf, and agno.vectordb.lancedb.lance_db.", "external_files": ["agno.agent", "agno.knowledge.pdf", "agno.vectordb.lancedb.lance_db"], "external_methods": ["pytest.fixture", "pytest.mark.asyncio", "pytest.mark"], "published": ["setup_vector_db", "get_filtered_data_dir", "prepare_knowledge_base", "aprepare_knowledge_base", "test_pdf_knowledge_base", "test_pdf_knowledge_base_async", "test_text_knowledge_base_with_metadata_path", "test_knowledge_base_with_metadata_path_invalid_filter", "test_knowledge_base_with_valid_filter", "test_knowledge_base_with_run_level_filter", "test_knowledge_base_filter_override"], "classes": [], "methods": [{"name": "setup_vector_db", "description": "Fixture to set up a temporary LanceDb instance for testing."}, {"name": "get_filtered_data_dir", "description": "Returns the path to the directory containing filtered test data."}, {"name": "prepare_knowledge_base", "description": "Creates and loads a PDFKnowledgeBase with sample documents and metadata."}, {"name": "aprepare_knowledge_base", "description": "Asynchronous version of prepare_knowledge_base, loads documents asynchronously."}, {"name": "test_pdf_knowledge_base", "description": "Tests loading PDFs into the knowledge base, querying, and cleanup."}, {"name": "test_pdf_knowledge_base_async", "description": "Asynchronous test for the knowledge base, including async database operations and agent interaction."}, {"name": "test_text_knowledge_base_with_metadata_path", "description": "Tests loading PDFs with metadata via a list of dicts and querying with filters."}, {"name": "test_knowledge_base_with_metadata_path_invalid_filter", "description": "Tests behavior with invalid filters, ensuring no invalid filter is used in search."}, {"name": "test_knowledge_base_with_valid_filter", "description": "Tests filtering the knowledge base with valid filters and verifying the results."}, {"name": "test_knowledge_base_with_run_level_filter", "description": "Tests passing filters at run time and verifying filtering behavior."}, {"name": "test_knowledge_base_filter_override", "description": "Ensures run-time filters override agent-level filters during queries."}], "calls": ["os.urandom", "LanceDb", "Path", "Path.parent", "PDFKnowledgeBase", "Agent", "vector_db.drop", "vector_db.exists", "vector_db.get_count", "vector_db.async_exists", "vector_db.async_get_count", "vector_db.async_drop", "kb.load_document", "kb.aload_document", "knowledge_base.load", "agent.run", "agent.arun"], "search-terms": ["test_pdf_knowledge_base", "async_pdf_load", "knowledge_base_filtering", "PDFKnowledgeBase", "test_pdf", "test_async", "knowledge_filters", "metadata_path", "test_text_knowledge_base"], "state": 2, "file_id": 711, "knowledge_revision": 2975, "git_revision": "6f79346d9babccb9b93ca5930a43b1b38f5cc80b", "ctags": [], "filename": "libs/agno/tests/integration/knowledge/test_pdf_knowledge_base.py", "hash": "7d8c4f9e641ca1d2b7aef53ea6434f67", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2975": "6f79346d9babccb9b93ca5930a43b1b38f5cc80b"}]}