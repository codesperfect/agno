{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for the 'openai_responses' module, specifically testing the 'sanitize_response_schema' function from 'agno.utils.models.openai_responses'. It defines several mock Pydantic models and test functions to verify schema sanitization behavior.", "external_files": ["pydantic", "agno.utils.models.openai_responses"], "external_methods": ["agno.utils.models.openai_responses.sanitize_response_schema"], "published": [], "classes": [{"name": "SimpleModel", "description": "A simple Pydantic model with string and integer fields."}, {"name": "DictModel", "description": "A Pydantic model with string, dict of string to int, and dict of string to float fields."}, {"name": "OptionalModel", "description": "A Pydantic model with a required string and an optional string field."}, {"name": "NestedModel", "description": "A nested Pydantic model used within a test to verify nested object handling."}, {"name": "ArrayModel", "description": "A Pydantic model with a list of dicts to test array item schema handling."}], "methods": [{"name": "test_sanitize_response_schema_dict_fields_excluded_from_required", "description": "Verifies that dict fields are excluded from the 'required' list in the schema."}, {"name": "test_sanitize_response_schema_preserves_dict_additional_properties", "description": "Checks that dict fields preserve their 'additionalProperties' schema after sanitization."}, {"name": "test_sanitize_response_schema_sets_root_additional_properties_false", "description": "Ensures the root schema's 'additionalProperties' is set to False."}, {"name": "test_sanitize_response_schema_regular_fields_required", "description": "Verifies that regular fields are included in the 'required' list."}, {"name": "test_sanitize_response_schema_removes_null_defaults", "description": "Checks that null defaults are removed from optional fields."}, {"name": "test_sanitize_response_schema_nested_objects", "description": "Tests sanitization with nested object schemas, ensuring nested 'additionalProperties' are preserved."}, {"name": "test_sanitize_response_schema_array_items", "description": "Verifies sanitization of array fields with dict items, preserving 'additionalProperties'."}, {"name": "test_sanitize_response_schema_mixed_object_with_properties_and_additional", "description": "Tests object schemas with both fixed properties and 'additionalProperties'."}, {"name": "test_sanitize_response_schema_object_without_additional_properties", "description": "Checks that objects without 'additionalProperties' get 'additionalProperties: false' and all properties required."}, {"name": "test_sanitize_response_schema_object_with_additional_properties_true", "description": "Verifies that 'additionalProperties: true' is converted to false."}, {"name": "test_sanitize_response_schema_preserves_non_object_types", "description": "Ensures non-object schemas are unchanged except for removal of null defaults."}], "calls": ["agno.utils.models.openai_responses.sanitize_response_schema"], "search-terms": ["openai_responses", "sanitize_response_schema", "json_schema", "pydantic models", "unit tests", "schema sanitization", "nested objects", "array of dicts"], "state": 2, "file_id": 608, "knowledge_revision": 2869, "git_revision": "fadab820eeb5c0e4b511274ebb4ad8312704e972", "ctags": [], "filename": "libs/agno/tests/unit/utils/test_openai_responses.py", "hash": "fbff8d2bf697ac204ea0f95d960a3ac7", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2869": "fadab820eeb5c0e4b511274ebb4ad8312704e972"}]}