{"is_source_file": true, "format": "Python", "description": "This Python source file defines the MongoMemoryDb class, which provides an implementation of a memory database backed by MongoDB. It includes methods for creating indexes, checking existence, reading, upserting, deleting, dropping, and clearing memory records, as well as checking collection existence.", "external_files": ["pymongo", "agno.memory.db.base", "agno.memory.row", "agno.utils.log"], "external_methods": ["pymongo.MongoClient", "pymongo.collection.Collection.create_index", "pymongo.collection.Collection.find_one", "pymongo.collection.Collection.update_one", "pymongo.collection.Collection.delete_one", "pymongo.collection.Collection.drop", "pymongo.collection.Collection.delete_many", "pymongo.database.Database.list_collection_names", "datetime.datetime.now", "datetime.timezone"], "published": ["MongoMemoryDb"], "classes": [{"name": "MongoMemoryDb", "description": "A class providing a memory store backed by a MongoDB collection, with methods for managing memory records."}], "methods": [{"name": "__init__", "description": "Initializes the MongoMemoryDb with connection parameters and sets up the database and collection."}, {"name": "create", "description": "Creates indexes on the collection for efficient querying."}, {"name": "memory_exists", "description": "Checks if a specific memory record exists in the collection."}, {"name": "read_memories", "description": "Reads memory records from the collection, optionally filtered by user_id, limited, and sorted."}, {"name": "upsert_memory", "description": "Inserts or updates a memory record in the collection, with versioning."}, {"name": "delete_memory", "description": "Deletes a memory record by its ID."}, {"name": "drop_table", "description": "Drops the entire collection."}, {"name": "table_exists", "description": "Checks if the collection exists in the database."}, {"name": "clear", "description": "Clears all records from the collection."}], "calls": ["pymongo.MongoClient", "self.collection.create_index", "self.collection.find_one", "self.collection.update_one", "self.collection.delete_one", "self.collection.drop", "self.collection.delete_many", "self.db.list_collection_names", "logger.error", "log_debug", "datetime.now", "memory.model_dump"], "search-terms": ["MongoMemoryDb", "MongoDB collection memory store", "MongoMemoryDb create index", "MongoMemoryDb upsert", "MongoMemoryDb read memories", "MongoMemoryDb delete memory"], "state": 2, "file_id": 121, "knowledge_revision": 2370, "git_revision": "9dbbb3aad1441a6e4286c02f3d75b29a74dd3623", "ctags": [], "filename": "libs/agno/agno/memory/db/mongodb.py", "hash": "eaeac42d3f4d1223c44796511fc0550b", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2370": "9dbbb3aad1441a6e4286c02f3d75b29a74dd3623"}]}