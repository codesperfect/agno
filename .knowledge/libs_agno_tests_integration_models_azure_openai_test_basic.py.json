{"is_source_file": true, "format": "Python", "description": "This file contains integration tests for the Azure OpenAI agent within the project, testing various functionalities such as basic responses, streaming, asynchronous calls, memory handling, response modeling, JSON mode, and session history.", "external_files": ["pytest", "pydantic", "agno.agent", "agno.models.azure", "agno.storage.sqlite"], "external_methods": ["pytest.mark.asyncio", "pytest", "BaseModel", "Field", "Agent", "RunResponse", "AzureOpenAI", "SqliteStorage"], "published": [], "classes": [{"name": "MovieScript", "description": "A Pydantic model used in tests to validate structured response content for movie scripts."}], "methods": [{"name": "_assert_metrics", "description": "A helper function to verify that the metrics in the response contain positive token counts and that total tokens equal the sum of input and output tokens."}, {"name": "test_basic", "description": "Tests the basic functionality of the Agent with a simple prompt and verifies the response and metrics."}, {"name": "test_basic_stream", "description": "Tests the streaming response functionality of the Agent."}, {"name": "test_async_basic", "description": "Asynchronous test for the basic agent response."}, {"name": "test_async_basic_stream", "description": "Asynchronous test for streaming responses."}, {"name": "test_with_memory", "description": "Tests the agent's ability to remember context across multiple interactions."}, {"name": "test_response_model", "description": "Tests the agent's ability to return structured responses conforming to a Pydantic model."}, {"name": "test_json_response_mode", "description": "Tests the agent's JSON response mode with a Pydantic model."}, {"name": "test_history", "description": "Tests session history management and message count."}], "calls": ["agent.run", "agent.arun", "agent.get_messages_for_session", "response.metrics.get", "sum", "assert", "hasattr", "list", "async for response in response_stream"], "search-terms": ["AzureOpenAI", "integration tests", "streaming responses", "session memory", "structured response", "Pydantic models", "asyncio", "agent responses"], "state": 2, "file_id": 805, "knowledge_revision": 3042, "git_revision": "777260577abc1ec1fbdfa141f65351510b5775ee", "ctags": [], "filename": "libs/agno/tests/integration/models/azure/openai/test_basic.py", "hash": "fd21c999fb8a73d764062aa50bfc348f", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"3042": "777260577abc1ec1fbdfa141f65351510b5775ee"}]}