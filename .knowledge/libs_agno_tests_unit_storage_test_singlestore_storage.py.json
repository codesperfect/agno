{"is_source_file": true, "format": "Python", "description": "This is a test module for the SingleStoreStorage class, containing unit tests for its initialization, CRUD operations, session retrieval, table management, and mode switching, using pytest and unittest.mock.", "external_files": ["unittest.mock", "pytest", "agno.storage.session.agent", "agno.storage.session.workflow", "agno.storage.singlestore"], "external_methods": ["MagicMock", "patch", "pytest.raises"], "published": ["test_initialization", "test_agent_storage_crud", "test_workflow_storage_crud", "test_get_all_sessions", "test_get_all_session_ids", "test_table_exists", "test_create_table", "test_drop_table", "test_mode_switching"], "classes": [], "methods": [{"name": "mock_engine", "description": "Creates a mock SQLAlchemy engine for testing."}, {"name": "mock_session", "description": "Creates a mock SQLAlchemy session with context manager behavior."}, {"name": "agent_storage", "description": "Sets up a mocked SingleStoreStorage instance for agent mode with mocked components."}, {"name": "workflow_storage", "description": "Sets up a mocked SingleStoreStorage instance for workflow mode with mocked components."}, {"name": "test_initialization", "description": "Tests the initialization of SingleStoreStorage with different parameters."}, {"name": "test_agent_storage_crud", "description": "Tests CRUD operations for agent storage sessions."}, {"name": "test_workflow_storage_crud", "description": "Tests CRUD operations for workflow storage sessions."}, {"name": "test_get_all_sessions", "description": "Tests retrieval of all sessions with filtering."}, {"name": "test_get_all_session_ids", "description": "Tests retrieval of all session IDs with filtering."}, {"name": "test_table_exists", "description": "Tests the table_exists method for existing and non-existing tables."}, {"name": "test_create_table", "description": "Tests creation of a table."}, {"name": "test_drop_table", "description": "Tests dropping a table."}, {"name": "test_mode_switching", "description": "Tests switching between 'agent' and 'workflow' modes."}], "calls": ["agno.storage.singlestore.sessionmaker", "agno.storage.singlestore.inspect", "agno.storage.singlestore.create_engine"], "search-terms": ["SingleStoreStorage", "unit tests", "pytest", "session mock", "storage CRUD", "table management", "mode switching", "agent session", "workflow session"], "state": 2, "file_id": 666, "knowledge_revision": 2938, "git_revision": "b282281e6026e1dab22d0e759cb9fdd41a777d61", "ctags": [], "filename": "libs/agno/tests/unit/storage/test_singlestore_storage.py", "hash": "1949801f26f7d556dd6978fe30b6624a", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2938": "b282281e6026e1dab22d0e759cb9fdd41a777d61"}]}