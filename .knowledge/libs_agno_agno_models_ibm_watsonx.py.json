{"is_source_file": true, "format": "Python", "description": "This file defines a Python class 'WatsonX' for interacting with IBM WatsonX models, including methods for configuration, message formatting, API invocation (synchronous, asynchronous, streaming), and response parsing. It integrates with IBM's WatsonX SDK and handles environment variables for credentials.", "external_files": ["agno.exceptions", "agno.models.base", "agno.models.message", "agno.models.response", "agno.utils.log", "agno.utils.models.watsonx", "ibm_watsonx_ai", "ibm_watsonx_ai.foundation_models"], "external_methods": ["log_debug", "log_error", "log_warning", "format_images_for_message"], "published": ["WatsonX"], "classes": [{"name": "WatsonX", "description": "A class for interacting with IBM WatsonX models, providing methods for configuration, message formatting, API calls, and response parsing."}], "methods": [{"name": "_get_client_params", "description": "Prepares and returns client parameters, fetching credentials from environment variables if not set."}, {"name": "get_client", "description": "Returns an instance of the WatsonX ModelInference client, initializing it if necessary."}, {"name": "get_request_params", "description": "Constructs and returns request parameters for API calls, including optional tools and response format."}, {"name": "_format_message", "description": "Formats a Message object into a dictionary suitable for WatsonX API, handling images and warnings for unsupported media."}, {"name": "invoke", "description": "Performs a synchronous chat request to WatsonX API with formatted messages and parameters."}, {"name": "ainvoke", "description": "Performs an asynchronous chat request to WatsonX API."}, {"name": "invoke_stream", "description": "Performs a streaming chat request to WatsonX API, yielding chunks of response."}, {"name": "ainvoke_stream", "description": "Performs an asynchronous streaming chat request to WatsonX API."}, {"name": "parse_tool_calls", "description": "Builds a list of tool call dictionaries from streamed tool call data."}, {"name": "parse_provider_response", "description": "Parses WatsonX API response into a ModelResponse object, extracting message content, role, tool calls, and usage."}, {"name": "parse_provider_response_delta", "description": "Parses streaming response delta into a ModelResponse object, handling incremental content and tool calls."}], "calls": ["get_client", "client.chat", "client.achat", "client.chat_stream", "client.achat_stream", "log_debug", "log_error", "log_warning"], "search-terms": ["WatsonX", "ibm_watsonx_ai", "ModelInference", "WatsonX API", "IBM WatsonX SDK", "streaming API", "async API", "message formatting"], "state": 2, "file_id": 239, "knowledge_revision": 2509, "git_revision": "69e8f9dc474e69f2d3863442c4c1c6824ca37f08", "ctags": [], "filename": "libs/agno/agno/models/ibm/watsonx.py", "hash": "a61cf397e73a519a9071c5845dbce21e", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2509": "69e8f9dc474e69f2d3863442c4c1c6824ca37f08"}]}