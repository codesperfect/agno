{"is_source_file": true, "format": "Python", "description": "This file defines the GCSJsonStorage class, which implements a cloud-based JSON storage system for sessions using Google Cloud Storage. It provides methods for creating, reading, updating, deleting, and listing session data stored as JSON blobs in a GCS bucket, supporting different session modes such as agent, team, and workflow.", "external_files": ["agno.storage.json", "agno.storage.session", "agno.storage.session.agent", "agno.storage.session.team", "agno.storage.session.workflow", "agno.utils.log", "google.cloud.storage"], "external_methods": ["json.dumps", "json.loads", "time.time", "gcs.Client", "gcs.Client.bucket", "gcs.Bucket.blob", "gcs.Bucket.create_bucket", "blob.download_as_bytes", "blob.upload_from_string", "blob.delete", "gcs.Client.list_blobs", "AgentSession.from_dict", "TeamSession.from_dict", "WorkflowSession.from_dict"], "published": ["GCSJsonStorage"], "classes": [{"name": "GCSJsonStorage", "description": "A class that manages session storage in Google Cloud Storage, supporting create, read, update, delete, and list operations for session data in JSON format."}], "methods": [{"name": "__init__", "description": "Initializes the GCSJsonStorage with specified bucket, prefix, mode, and optional GCP project, location, and credentials."}, {"name": "create", "description": "Creates the GCS bucket if it does not already exist."}, {"name": "serialize", "description": "Serializes a Python dictionary into a JSON string."}, {"name": "deserialize", "description": "Deserializes a JSON string into a Python dictionary."}, {"name": "read", "description": "Reads a session JSON blob from GCS and returns the corresponding Session object, or None if not found or mismatched user_id."}, {"name": "get_all_session_ids", "description": "Lists all session IDs stored in the GCS bucket."}, {"name": "get_all_sessions", "description": "Retrieves all session objects stored in the GCS bucket, optionally filtered by user_id."}, {"name": "get_recent_sessions", "description": "Retrieves the most recent sessions ordered by creation time, limited by the specified number."}, {"name": "upsert", "description": "Inserts or updates a session in GCS as a JSON blob."}, {"name": "delete_session", "description": "Deletes a specific session JSON blob from GCS."}, {"name": "drop", "description": "Deletes all session JSON blobs from the GCS bucket."}, {"name": "upgrade_schema", "description": "Placeholder for schema upgrade logic, not implemented."}], "calls": ["json.dumps", "json.loads", "gcs.Client", "gcs.Client.bucket", "gcs.Bucket.create_bucket", "gcs.Bucket.blob", "blob.download_as_bytes", "blob.upload_from_string", "blob.delete", "gcs.Client.list_blobs", "AgentSession.from_dict", "TeamSession.from_dict", "WorkflowSession.from_dict"], "search-terms": ["GCSJsonStorage", "Google Cloud Storage", "session storage", "cloud JSON storage", "GCS bucket operations", "session management", "cloud session persistence"], "state": 2, "file_id": 524, "knowledge_revision": 2818, "git_revision": "88b8f942458a148da343660694036160a152bdf2", "ctags": [], "filename": "libs/agno/agno/storage/gcs_json.py", "hash": "718662141c98b04e9101b801c3a83352", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2818": "88b8f942458a148da343660694036160a152bdf2"}]}