{"is_source_file": true, "format": "Python", "description": "This file implements a simple HTTP server for handling CLI authentication tokens via web flow, including request handling, token storage, and server management.", "external_files": ["json", "http.server", "typing", "urllib.parse", "agno.cli.settings"], "external_methods": ["json.loads", "json.dumps", "json.dumps", "json.loads", "json.dumps", "json.loads", "agno_cli_settings.tmp_token_path.parent.mkdir", "agno_cli_settings.tmp_token_path.touch", "agno_cli_settings.tmp_token_path.write_text", "agno_cli_settings.tmp_token_path.read_text", "agno_cli_settings.tmp_token_path.unlink"], "published": ["get_auth_token_from_web_flow", "get_port_for_auth_server"], "classes": [{"name": "CliAuthRequestHandler", "description": "HTTP request handler for processing authentication token requests, redirecting, and serving HTML pages."}, {"name": "CliAuthServer", "description": "Encapsulates the HTTP server running in a separate thread to handle authentication requests."}], "methods": [{"name": "_redirect_with_status", "description": "Generates an HTML page with a redirect to the specified URI, indicating authentication status."}, {"name": "_set_response", "description": "Sends a 204 No Content response with CORS headers."}, {"name": "_set_html_response", "description": "Sends an HTML response with specified content and headers."}, {"name": "_store_token", "description": "Stores the authentication token in a temporary file."}, {"name": "do_GET", "description": "Handles GET requests to store token and redirect."}, {"name": "do_OPTIONS", "description": "Handles OPTIONS requests for CORS preflight."}, {"name": "do_POST", "description": "Handles POST requests to store token data."}, {"name": "log_message", "description": "Overrides default logging to suppress output."}, {"name": "__init__", "description": "Initializes the HTTP server and thread for handling requests."}, {"name": "run", "description": "Starts the server loop to handle incoming requests."}, {"name": "start", "description": "Starts the server thread."}, {"name": "shut_down", "description": "Stops the server thread."}], "calls": ["json.loads", "json.dumps", "json.loads", "json.dumps", "json.loads", "json.dumps", "json.loads", "agno_cli_settings.tmp_token_path.parent.mkdir", "agno_cli_settings.tmp_token_path.touch", "agno_cli_settings.tmp_token_path.write_text", "agno_cli_settings.tmp_token_path.read_text", "agno_cli_settings.tmp_token_path.unlink", "self._server.handle_request"], "search-terms": ["CLI auth token server", "auth token web flow", "Python HTTP server", "auth token storage", "auth redirect handler"], "state": 2, "file_id": 500, "knowledge_revision": 2762, "git_revision": "2feb8d551f99f915d5a778ce2aa91d34b2e409ce", "ctags": [], "filename": "libs/agno/agno/cli/auth_server.py", "hash": "6819f100165e3becae6387e95eb351cb", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2762": "2feb8d551f99f915d5a778ce2aa91d34b2e409ce"}]}