{"is_source_file": true, "format": "Python", "description": "This file contains test cases for the 'team' component of a backend API, specifically testing session persistence, multi-user/multi-session handling, and storage interactions within the 'agno' project. It uses pytest fixtures and async test functions to verify correct behavior of team sessions, memory, and storage.", "external_files": ["os", "tempfile", "uuid", "pytest", "agno.agent.agent", "agno.memory.v2.db.sqlite", "agno.memory.v2.memory", "agno.models.anthropic.claude", "agno.models.google.gemini", "agno.models.openai.chat", "agno.storage.sqlite", "agno.team.team"], "external_methods": ["pytest.fixture", "pytest.mark.asyncio", "pytest.mark.asyncio", "pytest.mark.asyncio", "pytest.mark.asyncio", "pytest.mark.asyncio", "pytest.mark.asyncio", "pytest.mark.asyncio"], "published": ["test_run_history_persistence", "test_run_session_summary", "test_member_run_history_persistence", "test_multi_user_multi_session_route_team", "test_correct_sessions_in_db"], "classes": [{"name": "Agent", "description": "Represents an agent with a specific model and storage, used within team members."}, {"name": "SqliteMemoryDb", "description": "SQLite-backed in-memory database for testing memory storage."}, {"name": "Memory", "description": "Memory component managing conversation state and history."}, {"name": "Team", "description": "Represents a team of agents with specific configurations, used for orchestrating multi-agent interactions."}], "methods": [{"name": "temp_storage_db_file", "description": "Fixture that creates a temporary SQLite database file for team storage testing."}, {"name": "temp_memory_db_file", "description": "Fixture that creates a temporary SQLite database file for memory testing."}, {"name": "team_storage", "description": "Fixture that creates a SQLite storage instance for team sessions."}, {"name": "memory_db", "description": "Fixture that creates a SQLite in-memory database for testing."}, {"name": "memory", "description": "Fixture that creates a Memory instance for testing."}, {"name": "route_team", "description": "Fixture that creates a Team instance configured for route mode with storage and memory."}, {"name": "route_team_with_members", "description": "Fixture that creates a Team with a travel agent member, configured for route mode."}, {"name": "test_run_history_persistence", "description": "Test that verifies session history is persisted correctly after multiple interactions."}, {"name": "test_run_session_summary", "description": "Test that verifies session summaries are persisted correctly."}, {"name": "test_member_run_history_persistence", "description": "Test that verifies member session history is persisted correctly."}, {"name": "test_multi_user_multi_session_route_team", "description": "Test handling multiple users and sessions within a team, ensuring correct session management."}, {"name": "test_correct_sessions_in_db", "description": "Test that verifies sessions are correctly stored and retrieved from the database."}], "calls": ["os.unlink", "storage.create", "db.create", "route_team.arun", "team_storage.read", "team_storage.get_all_session_ids", "team_storage.get_all_sessions", "agent_storage.read"], "search-terms": ["pytest fixtures", "session persistence", "multi-user sessions", "team storage", "agent storage", "async tests", "session summaries", "memory management", "integration tests"], "state": 2, "file_id": 728, "knowledge_revision": 2999, "git_revision": "e9d640f53cf3d31e832d06e920c937bf2a365193", "ctags": [], "filename": "libs/agno/tests/integration/teams/test_team_with_storage_and_memory.py", "hash": "f9e5c45970ff24a1d992546310701567", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2999": "e9d640f53cf3d31e832d06e920c937bf2a365193"}]}