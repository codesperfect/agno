{"is_source_file": true, "format": "Python", "description": "This file contains test cases for the WatsonX model integration within the agno project, utilizing pytest for testing various functionalities such as basic responses, streaming, asynchronous calls, memory handling, and response modeling.", "external_files": ["pytest", "pydantic", "agno.agent", "agno.models.ibm", "agno.storage.sqlite"], "external_methods": ["pytest.mark.asyncio", "pytest", "BaseModel", "Field", "Agent", "RunResponse", "WatsonX", "SqliteStorage"], "published": [], "classes": [{"name": "MovieScript", "description": "A Pydantic model used for testing structured response outputs, representing a movie script with title, genre, and plot."}], "methods": [{"name": "_assert_metrics", "description": "A helper function to assert that the metrics in a RunResponse object have valid, non-zero token counts."}, {"name": "test_basic", "description": "Tests the basic functionality of the WatsonX agent, ensuring it returns a valid response with expected roles."}, {"name": "test_basic_stream", "description": "Tests the streaming response functionality of the agent, verifying it yields multiple responses with content."}, {"name": "test_async_basic", "description": "Asynchronous test for basic agent response, verifying content and roles."}, {"name": "test_async_basic_stream", "description": "Asynchronous test for streaming responses, verifying each response has content."}, {"name": "test_with_memory", "description": "Tests the agent's ability to remember conversation history across multiple runs."}, {"name": "test_response_model", "description": "Tests the agent's ability to produce structured responses conforming to a Pydantic model."}, {"name": "test_json_response_mode", "description": "Tests the agent's response when configured to output JSON mode, ensuring structured data."}, {"name": "test_history", "description": "Verifies that the agent correctly maintains and retrieves conversation history using SQLite storage."}], "calls": ["pytest.mark.asyncio", "agent.run", "agent.arun", "agent.get_messages_for_session", "assert", "sum"], "search-terms": ["WatsonX", "integration tests", "agent responses", "streaming", "asyncio", "memory", "structured response", "pydantic model", "sqlite storage"], "state": 2, "file_id": 762, "knowledge_revision": 2989, "git_revision": "777260577abc1ec1fbdfa141f65351510b5775ee", "ctags": [], "filename": "libs/agno/tests/integration/models/ibm/watsonx/test_basic.py", "hash": "60754086889d8c13a25e25cd1e5b8ca0", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2989": "777260577abc1ec1fbdfa141f65351510b5775ee"}]}