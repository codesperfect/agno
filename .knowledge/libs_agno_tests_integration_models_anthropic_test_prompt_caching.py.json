{"is_source_file": true, "format": "Python", "description": "This is an integration test script for the Claude model prompt caching functionality within the 'agno' project. It tests system message caching, cache performance, usage metrics parsing, and caching behavior with the Agent class, including asynchronous operations.", "external_files": ["pathlib.Path", "unittest.mock.Mock", "pytest", "agno.agent.Agent", "agno.agent.RunResponse", "agno.models.anthropic.Claude", "agno.utils.media.download_file"], "external_methods": ["Path.joinpath", "download_file", "pytest.fail", "assert", "sum"], "published": ["test_prompt_caching_with_agent", "test_async_prompt_caching"], "classes": [{"name": "Agent", "description": "A class representing an agent that interacts with the Claude model, capable of running prompts synchronously and asynchronously."}, {"name": "RunResponse", "description": "A class representing the response from the agent's run method, including content, metrics, and message history."}, {"name": "Claude", "description": "A class representing the Claude model, with methods for preparing request parameters and parsing provider responses."}], "methods": [{"name": "_get_large_system_prompt", "description": "Loads a large system prompt text from a file in S3."}, {"name": "_assert_cache_metrics", "description": "Asserts cache-related metrics in the response object."}, {"name": "test_system_message_caching_basic", "description": "Tests basic system message caching functionality."}, {"name": "test_extended_cache_time", "description": "Tests extended cache time configuration."}, {"name": "test_usage_metrics_parsing", "description": "Tests parsing of usage metrics with standard field names."}, {"name": "test_prompt_caching_with_agent", "description": "Tests prompt caching behavior using the Agent class with a large system prompt."}, {"name": "test_async_prompt_caching", "description": "Tests asynchronous prompt caching functionality."}], "calls": ["Path.joinpath", "download_file", "pytest.fail", "assert", "sum", "Path.read_text", "Claude._prepare_request_kwargs", "Claude.parse_provider_response", "Agent.run", "Agent.arun"], "search-terms": ["Claude model prompt caching", "integration tests", "cache performance tracking", "usage metrics parsing", "system message caching", "async prompt caching", "agent class", "large system prompt"], "state": 2, "file_id": 753, "knowledge_revision": 2986, "git_revision": "1b0b52b05fcb99a758181fca0719cb6fdaee775f", "ctags": [], "filename": "libs/agno/tests/integration/models/anthropic/test_prompt_caching.py", "hash": "deafd0dd88bf40130891ed51115223aa", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2986": "1b0b52b05fcb99a758181fca0719cb6fdaee775f"}]}