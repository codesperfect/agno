{"is_source_file": true, "format": "Python", "description": "This file defines a Cohere model class for interacting with Cohere's chat API, including methods for synchronous and asynchronous invocation, stream handling, and response parsing. It integrates with project-specific message, response, and logging utilities, and manages external Cohere API clients.", "external_files": ["cohere", "agno.exceptions", "agno.models.base", "agno.models.message", "agno.models.response", "agno.utils.log", "agno.utils.models.cohere"], "external_methods": ["cohere.ClientV2", "cohere.AsyncClientV2", "cohere.types.chat_response.ChatResponse", "cohere.types.streamed_chat_response_v2.StreamedChatResponseV2", "format_messages", "log_debug", "log_error", "_add_usage_metrics_to_assistant_message"], "published": ["Cohere"], "classes": [{"name": "Cohere", "description": "A class representing the Cohere language model, providing methods for chat invocation, streaming, and response parsing, with support for both sync and async operations."}], "methods": [{"name": "get_client", "description": "Returns the Cohere synchronous client, initializing it if necessary, using API key from environment or attribute."}, {"name": "get_async_client", "description": "Returns the Cohere asynchronous client, initializing it if necessary, using API key from environment or attribute."}, {"name": "get_request_params", "description": "Constructs request parameters for Cohere API calls based on model attributes, including optional tools and response format."}, {"name": "invoke", "description": "Performs a non-streaming chat request to Cohere API with provided messages and parameters."}, {"name": "invoke_stream", "description": "Performs a streaming chat request to Cohere API, yielding streamed responses."}, {"name": "ainvoke", "description": "Asynchronously performs a non-streaming chat request to Cohere API."}, {"name": "ainvoke_stream", "description": "Asynchronously performs a streaming chat request to Cohere API, yielding streamed responses."}, {"name": "parse_provider_response", "description": "Parses a Cohere ChatResponse into a project-specific ModelResponse object."}, {"name": "_process_stream_response", "description": "Processes individual streamed responses, updating assistant message metrics and accumulating content."}, {"name": "process_response_stream", "description": "Processes a stream of responses synchronously, yielding ModelResponse objects."}, {"name": "aprocess_response_stream", "description": "Asynchronously processes a stream of responses, yielding ModelResponse objects."}, {"name": "parse_provider_response_delta", "description": "Placeholder for parsing delta responses from Cohere stream responses."}], "calls": ["cohere.ClientV2", "cohere.AsyncClientV2", "cohere.chat", "cohere.chat_stream", "format_messages", "log_debug", "log_error", "_add_usage_metrics_to_assistant_message"], "search-terms": ["Cohere", "chat_api", "streaming_response", "async_cohere_client", "cohere_models", "cohere_response_parsing"], "state": 2, "file_id": 247, "knowledge_revision": 2532, "git_revision": "69e8f9dc474e69f2d3863442c4c1c6824ca37f08", "ctags": [], "filename": "libs/agno/agno/models/cohere/chat.py", "hash": "4b6e843fce52a48c46542af8173de297", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2532": "69e8f9dc474e69f2d3863442c4c1c6824ca37f08"}]}