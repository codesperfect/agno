{"is_source_file": true, "format": "Python", "description": "Unit tests for the agui app, specifically testing the EventBuffer class and the async_stream_agno_response_as_agui_events function, including various scenarios of event handling and buffering during asynchronous responses.", "external_files": ["unittest.mock", "pytest", "ag_ui.core", "agno.app.agui.utils", "agno.run.response"], "external_methods": ["pytest.mark.asyncio", "ag_ui.core.EventType", "agno.app.agui.utils.EventBuffer", "agno.app.agui.utils.async_stream_agno_response_as_agui_events", "agno.run.response.RunResponseContentEvent", "agno.run.response.ToolCallCompletedEvent", "agno.run.response.ToolCallStartedEvent"], "published": [], "classes": [], "methods": [{"name": "test_event_buffer_initial_state", "description": "Tests the initial state of the EventBuffer object."}, {"name": "test_event_buffer_tool_call_lifecycle", "description": "Tests the lifecycle of starting and ending a tool call within EventBuffer."}, {"name": "test_event_buffer_multiple_tool_calls", "description": "Tests handling multiple concurrent tool calls in EventBuffer."}, {"name": "test_event_buffer_end_nonexistent_tool_call", "description": "Tests ending a tool call that was never started."}, {"name": "test_event_buffer_duplicate_start_tool_call", "description": "Tests starting the same tool call multiple times."}, {"name": "test_event_buffer_duplicate_end_tool_call", "description": "Tests ending the same tool call multiple times."}, {"name": "test_event_buffer_complex_sequence", "description": "Tests a complex sequence of starting and ending multiple tool calls."}, {"name": "test_event_buffer_blocking_behavior_edge_cases", "description": "Tests edge cases such as empty string tool call IDs."}, {"name": "test_stream_basic", "description": "Tests the async_stream_agno_response_as_agui_events function for basic event emission."}, {"name": "test_stream_with_tool_call_blocking", "description": "Tests event buffering during a simulated tool call in the async stream."}], "calls": ["unittest.mock.MagicMock", "pytest.mark.asyncio", "ag_ui.core.EventType", "agno.app.agui.utils.EventBuffer", "agno.app.agui.utils.async_stream_agno_response_as_agui_events", "agno.run.response.RunResponseContentEvent", "agno.run.response.ToolCallCompletedEvent", "agno.run.response.ToolCallStartedEvent"], "search-terms": ["EventBuffer", "async_stream_agno_response_as_agui_events", "unit tests", "agui", "event handling", "tool call lifecycle", "async response stream", "pytest asyncio"], "state": 2, "file_id": 609, "knowledge_revision": 2841, "git_revision": "c25961784dc0a3531ce3f6cdbd9854001ee2a858", "ctags": [], "filename": "libs/agno/tests/unit/app/test_agui_app.py", "hash": "4ae64f4fa7266c0770456761abf61398", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2841": "c25961784dc0a3531ce3f6cdbd9854001ee2a858"}]}