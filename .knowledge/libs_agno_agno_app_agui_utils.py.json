{"is_source_file": true, "format": "Python", "description": "This file contains utility functions and classes used by the AG-UI router component, including event buffering, response content extraction, and stream processing to convert backend response streams into UI events.", "external_files": ["ag_ui.core", "ag_ui.core.types", "agno.run.response", "agno.run.team"], "external_methods": ["ag_ui.core.BaseEvent", "ag_ui.core.EventType", "ag_ui.core.RunFinishedEvent", "ag_ui.core.StepFinishedEvent", "ag_ui.core.StepStartedEvent", "ag_ui.core.TextMessageContentEvent", "ag_ui.core.TextMessageEndEvent", "ag_ui.core.TextMessageStartEvent", "ag_ui.core.ToolCallArgsEvent", "ag_ui.core.ToolCallEndEvent", "ag_ui.core.ToolCallStartEvent", "ag_ui.core.types.Message", "agno.run.response.RunEvent", "agno.run.response.RunResponseContentEvent", "agno.run.response.RunResponseEvent", "agno.run.team.RunResponseContentEvent", "agno.run.team.TeamRunEvent", "agno.run.team.TeamRunResponseEvent"], "published": ["stream_agno_response_as_agui_events", "async_stream_agno_response_as_agui_events"], "classes": [{"name": "EventBuffer", "description": "A buffer to manage event ordering constraints, tracking active, ended, and blocking tool calls during stream processing."}], "methods": [{"name": "get_last_user_message", "description": "Retrieves the last message from the user in a list of messages."}, {"name": "extract_team_response_chunk_content", "description": "Extracts content from a team response chunk, including responses from team members."}, {"name": "extract_response_chunk_content", "description": "Extracts content from a response chunk, focusing on assistant messages."}, {"name": "_create_events_from_chunk", "description": "Processes a response chunk to generate UI events and updates message state."}, {"name": "_create_completion_events", "description": "Generates events signaling the end of a run, including active tool calls and message termination."}, {"name": "_emit_event_logic", "description": "Handles event buffering and ordering, ensuring proper sequence of events during stream processing."}, {"name": "stream_agno_response_as_agui_events", "description": "Converts a backend response stream into a sequence of UI events, managing event order and lifecycle."}, {"name": "async_stream_agno_response_as_agui_events", "description": "Asynchronous version of the stream converter, yielding UI events from an async response stream."}], "calls": ["uuid.uuid4", "collections.deque", "collections.abc.Iterator", "dataclasses.dataclass", "ag_ui.core.BaseEvent", "ag_ui.core.EventType", "ag_ui.core.RunFinishedEvent", "ag_ui.core.StepFinishedEvent", "ag_ui.core.StepStartedEvent", "ag_ui.core.TextMessageContentEvent", "ag_ui.core.TextMessageEndEvent", "ag_ui.core.TextMessageStartEvent", "ag_ui.core.ToolCallArgsEvent", "ag_ui.core.ToolCallEndEvent", "ag_ui.core.ToolCallStartEvent", "ag_ui.core.types.Message", "agno.run.response.RunEvent", "agno.run.response.RunResponseContentEvent", "agno.run.response.RunResponseEvent", "agno.run.team.RunResponseContentEvent", "agno.run.team.TeamRunEvent", "agno.run.team.TeamRunResponseEvent"], "search-terms": ["AG-UI router", "event buffering", "response stream processing", "content extraction", "tool call events", "response content handling", "stream conversion", "async response processing"], "state": 2, "file_id": 342, "knowledge_revision": 2604, "git_revision": "c25961784dc0a3531ce3f6cdbd9854001ee2a858", "ctags": [], "filename": "libs/agno/agno/app/agui/utils.py", "hash": "b834cabf228f139efaa3751538fa3f51", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2604": "c25961784dc0a3531ce3f6cdbd9854001ee2a858"}]}