{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for the NebiusTools class in the agno.tools.models.nebius module. It uses pytest and unittest.mock to test initialization, client lazy loading, and image generation methods, including handling of successful responses, no data, and exceptions.", "external_files": ["agno.agent", "agno.media", "agno.tools.models.nebius"], "external_methods": ["pytest.raises", "pytest.fixture", "patch", "MagicMock", "base64.b64encode", "UUID"], "published": [], "classes": [], "methods": [{"name": "mock_agent", "description": "Fixture that creates a mock Agent object with an add_image method."}, {"name": "mock_client", "description": "Fixture that creates a generic mock client object."}, {"name": "mock_nebius_tools", "description": "Fixture that patches the Nebius class to return a mock instance with a mock client."}, {"name": "mock_successful_response", "description": "Fixture that creates a mock response with base64-encoded image data."}, {"name": "mock_failed_response_no_data", "description": "Fixture that creates a mock response with no data to simulate failed image generation."}, {"name": "test_nebius_tools_init_with_api_key_arg", "description": "Tests initialization of NebiusTools with an API key provided as an argument."}, {"name": "test_nebius_tools_init_with_env_var", "description": "Tests initialization of NebiusTools with API key from environment variable."}, {"name": "test_nebius_tools_init_no_api_key", "description": "Tests that initialization raises ValueError if no API key is provided or found."}, {"name": "test_get_client_lazy_initialization", "description": "Tests that the Nebius client is lazily initialized when first accessed."}, {"name": "test_generate_image_success", "description": "Tests successful image generation and addition to agent."}, {"name": "test_generate_image_no_data", "description": "Tests handling when API returns no image data."}, {"name": "test_generate_image_api_error", "description": "Tests handling of exceptions during image generation API call."}, {"name": "test_generate_image_with_custom_params", "description": "Tests image generation with custom model, quality, size, and style parameters."}], "calls": ["agno.tools.models.nebius.Nebius", "agno.tools.models.nebius.getenv", "agno.tools.models.nebius.uuid4", "mock_nebius_instance.get_client", "mock_client.images.generate", "mock_agent.add_image"], "search-terms": ["NebiusTools", "unit tests", "mock responses", "image generation", "pytest fixtures", "API key initialization", "lazy client", "mocked API responses"], "state": 2, "file_id": 631, "knowledge_revision": 2871, "git_revision": "4c35eba924325072ffdf029219bdef4fc386136f", "ctags": [], "filename": "libs/agno/tests/unit/tools/models/test_nebius.py", "hash": "145b5f2de7438e88e355639337e3bb12", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2871": "4c35eba924325072ffdf029219bdef4fc386136f"}]}