{"is_source_file": true, "format": "Python", "description": "This file contains utility functions for processing images in various formats (bytes, file path, URL) and converting them into message payloads, as well as a function to sanitize JSON schemas for OpenAI response formatting. It is part of a larger project involving image handling and schema validation.", "external_files": ["agno.media", "agno.utils.log", "agno.utils.models.schema_utils"], "external_methods": ["agno.media.Image", "agno.utils.log.logger", "agno.utils.models.schema_utils.is_dict_field"], "published": [], "classes": [], "methods": [{"name": "_process_bytes_image", "description": "Encodes raw image bytes into a base64 data URL with JPEG MIME type."}, {"name": "_process_image_path", "description": "Reads an image file from a given path and encodes it into a base64 data URL with the appropriate MIME type."}, {"name": "_process_image_url", "description": "Validates and processes an image URL or data URL."}, {"name": "_process_image", "description": "Processes an Image object, determining whether it is a URL, file path, or raw bytes, and returns a formatted image payload."}, {"name": "images_to_message", "description": "Converts a sequence of Image objects into a list of message payloads suitable for a model, handling different image formats."}, {"name": "sanitize_response_schema", "description": "Recursively sanitizes a JSON schema to conform with OpenAI's response format rules, setting 'additionalProperties', removing null defaults, and ensuring required fields."}], "calls": ["base64.b64encode", "mimetypes.guess_type", "open", "logger.warning", "logger.error", "is_dict_field"], "search-terms": ["image processing", "OpenAI response schema", "image URL validation", "base64 encoding", "schema sanitization"], "state": 2, "file_id": 178, "knowledge_revision": 2413, "git_revision": "fadab820eeb5c0e4b511274ebb4ad8312704e972", "ctags": [], "filename": "libs/agno/agno/utils/models/openai_responses.py", "hash": "f5a7eb6883cad0469297d38c9d0061c6", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2413": "fadab820eeb5c0e4b511274ebb4ad8312704e972"}]}