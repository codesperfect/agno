{"is_source_file": true, "format": "Python", "description": "This file defines a Python class 'Gemini' that models Google's Generative AI models, including methods for client management, request parameter construction, message formatting, and response parsing. It integrates with Google\u2019s 'google-genai' SDK and handles complex message and media processing for AI interactions.", "external_files": ["agno.exceptions", "agno.media", "agno.models.base", "agno.models.message", "agno.models.response", "agno.utils.gemini", "agno.utils.log", "agno.utils.models.schema_utils", "google.genai", "google.genai.errors", "google.genai.types"], "external_methods": ["log_debug", "log_error", "log_info", "log_warning", "get_response_schema_for_provider", "convert_schema", "format_function_definitions", "format_image_for_message"], "published": ["Gemini"], "classes": [{"name": "Gemini", "description": "A data class representing Google's Gemini generative AI model, with methods for client management, message formatting, request construction, and response parsing."}], "methods": [{"name": "get_client", "description": "Returns an instance of the GeminiClient, initializing it if necessary based on configuration and environment variables."}, {"name": "get_request_params", "description": "Constructs and returns the request parameters for the Gemini API, including message formatting, schema conversion, and optional tools or grounding configurations."}, {"name": "invoke", "description": "Sends a list of messages to the Gemini model and returns the generated content response."}, {"name": "invoke_stream", "description": "Streams the response content from the Gemini model for a list of messages."}, {"name": "ainvoke", "description": "Asynchronously invokes the Gemini model with messages and returns the response."}, {"name": "ainvoke_stream", "description": "Asynchronously streams the response content from the Gemini model."}, {"name": "_format_messages", "description": "Converts a list of Message objects into Gemini-compatible message parts, handling media and function call content."}, {"name": "_format_audio_for_message", "description": "Formats an Audio object into a Gemini Part or GeminiFile for message inclusion."}, {"name": "_format_video_for_message", "description": "Formats a Video object into a Gemini Part for message inclusion."}, {"name": "_format_file_for_message", "description": "Formats a File object into a Gemini Part for message inclusion."}, {"name": "format_function_call_results", "description": "Appends function call results to the message list."}, {"name": "parse_provider_response", "description": "Parses a GenerateContentResponse into a ModelResponse, extracting content, citations, and usage metadata."}, {"name": "parse_provider_response_delta", "description": "Parses a delta response into a ModelResponse, similar to the full response parser."}, {"name": "__deepcopy__", "description": "Creates a deep copy of the Gemini model instance, resetting the client to None to avoid duplicating connections."}], "calls": ["log_error", "log_info", "log_debug", "log_warning", "get_response_schema_for_provider", "convert_schema", "format_function_definitions", "format_image_for_message"], "search-terms": ["Gemini", "google-genai", "google.genai", "Vertex AI", "generate_content", "parse_provider_response", "format_messages", "model_response", "streaming", "media handling"], "state": 2, "file_id": 285, "knowledge_revision": 2572, "git_revision": "2005343dc751a3dea696aac8f17ae98ae2232cbb", "ctags": [], "filename": "libs/agno/agno/models/google/gemini.py", "hash": "a54f43bb5f604a560e9d177a4f26ff26", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2572": "2005343dc751a3dea696aac8f17ae98ae2232cbb"}]}