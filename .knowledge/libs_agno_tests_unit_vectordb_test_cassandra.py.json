{"is_source_file": true, "format": "Python", "description": "Unit tests for the Cassandra vector database implementation, including mock setup, initialization, insert/search operations, existence checks, and asynchronous method testing.", "external_files": ["cassandra.cluster", "pytest", "agno.document", "agno.vectordb.cassandra", "agno.vectordb.cassandra.index"], "external_methods": ["Session.execute", "pytest.fixture", "pytest.raises", "patch.object"], "published": [], "classes": [], "methods": [{"name": "mock_session", "description": "Creates a mocked Cassandra session object with predefined return values for common operations."}, {"name": "mock_table", "description": "Creates a mock table object with methods for search, insert, and clear operations."}, {"name": "vector_db", "description": "Fixture that creates a Cassandra vector database instance with mocked session and table."}, {"name": "create_test_documents", "description": "Helper function to generate a list of test Document objects."}, {"name": "test_initialization", "description": "Tests the initialization of the Cassandra vector database, including failure cases."}, {"name": "test_insert_and_search", "description": "Tests inserting documents and performing search and vector search operations."}, {"name": "test_document_existence", "description": "Checks document existence by object, name, and ID."}, {"name": "test_upsert", "description": "Tests the upsert functionality, including modification and verification."}, {"name": "test_delete_and_drop", "description": "Tests delete and drop table operations."}, {"name": "test_exists", "description": "Checks table existence."}, {"name": "test_async_create", "description": "Tests asynchronous creation of the table."}, {"name": "test_async_doc_exists", "description": "Asynchronous test for document existence."}, {"name": "test_async_name_exists", "description": "Asynchronous test for name existence."}, {"name": "test_async_insert_and_search", "description": "Asynchronous test for inserting documents and searching."}, {"name": "test_async_upsert", "description": "Asynchronous test for upsert functionality."}, {"name": "test_async_drop", "description": "Asynchronous test for dropping the table."}, {"name": "test_async_exists", "description": "Asynchronous test for checking table existence."}], "calls": ["Session.execute", "patch.object", "AgnoMetadataVectorCassandraTable.__new__", "db.create", "vector_db.insert", "vector_db.search", "vector_db.vector_search", "vector_db.doc_exists", "vector_db.name_exists", "vector_db.id_exists", "vector_db.upsert", "vector_db.delete", "vector_db.drop", "vector_db.exists", "vector_db.async_create", "vector_db.async_doc_exists", "vector_db.async_name_exists", "vector_db.async_insert", "vector_db.async_search", "vector_db.async_upsert", "vector_db.async_drop", "vector_db.async_exists"], "search-terms": ["unit tests", "cassandra", "vector database", "mock session", "async methods", "test documents", "vector search", "table creation", "document existence", "drop table"], "state": 2, "file_id": 676, "knowledge_revision": 2932, "git_revision": "e9c9b56a228d15ffc1c62509160880b68b96239f", "ctags": [], "filename": "libs/agno/tests/unit/vectordb/test_cassandra.py", "hash": "366befb83439677ee27b7bf5bd99c044", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2932": "e9c9b56a228d15ffc1c62509160880b68b96239f"}]}