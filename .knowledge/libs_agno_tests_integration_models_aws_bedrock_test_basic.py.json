{"is_source_file": true, "format": "Python", "description": "This file contains test functions for the AWS Bedrock agent, including metrics assertions, response validation, and usage of data models with Pydantic. It tests various functionalities such as basic responses, streaming, memory, structured response models, JSON mode, and session history.", "external_files": ["agno/agent.py", "agno/models/aws.py", "agno/storage/sqlite.py"], "external_methods": ["agno.agent.Agent", "agno.agent.RunResponse", "agno.models.aws.AwsBedrock", "agno.storage.sqlite.SqliteStorage"], "published": [], "classes": [{"name": "MovieScript", "description": "A Pydantic model for movie scripts with title, genre, and plot fields."}], "methods": [{"name": "_assert_metrics", "description": "Asserts that the response metrics contain positive token counts and that total tokens equal the sum of input and output tokens."}, {"name": "test_basic", "description": "Tests the basic response from the agent, verifying content, message roles, and metrics."}, {"name": "test_basic_stream", "description": "Tests streaming responses from the agent, ensuring responses are iterable and contain content."}, {"name": "test_with_memory", "description": "Tests agent memory by running interactions and verifying message history and content retention."}, {"name": "test_response_model", "description": "Tests structured response using a Pydantic model for movie scripts."}, {"name": "test_json_response_mode", "description": "Tests structured response in JSON mode with the same Pydantic model."}, {"name": "test_history", "description": "Tests session history management with SQLite storage, verifying message count after multiple interactions."}], "calls": ["agno.agent.Agent.run", "agno.agent.Agent.get_messages_for_session", "agno.agent.Agent.run_response"], "search-terms": ["AWS Bedrock", "integration tests", "Pydantic models", "session history", "streaming responses", "metrics assertions"], "state": 2, "file_id": 756, "knowledge_revision": 3003, "git_revision": "777260577abc1ec1fbdfa141f65351510b5775ee", "ctags": [], "filename": "libs/agno/tests/integration/models/aws/bedrock/test_basic.py", "hash": "7ac522ca8c88596139b30490e44bb417", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"3003": "777260577abc1ec1fbdfa141f65351510b5775ee"}]}