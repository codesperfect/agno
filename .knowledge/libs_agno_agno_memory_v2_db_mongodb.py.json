{"is_source_file": true, "format": "Python", "description": "This file defines the MongoMemoryDb class, which provides an implementation of a memory database backed by MongoDB. It includes methods for creating indexes, checking existence, reading, upserting, deleting, dropping, and clearing memory records, as well as checking collection existence.", "external_files": ["pymongo", "agno.memory.v2.db", "agno.memory.v2.db.schema", "agno.utils.log"], "external_methods": ["pymongo.MongoClient", "pymongo.collection.Collection", "pymongo.database.Database", "pymongo.errors.PyMongoError", "log_debug", "logger"], "published": ["MongoMemoryDb"], "classes": [{"name": "MongoMemoryDb", "description": "A class providing a MongoDB-backed in-memory database implementation, including methods for CRUD operations, index management, and collection handling."}], "methods": [{"name": "__init__", "description": "Initializes the MongoMemoryDb with connection parameters, setting up the database and collection references."}, {"name": "__dict__", "description": "Returns a dictionary representation of the database configuration."}, {"name": "create", "description": "Creates indexes on the collection for 'id', 'user_id', and 'created_at'."}, {"name": "memory_exists", "description": "Checks if a specific memory exists in the collection based on its 'id'."}, {"name": "read_memories", "description": "Reads memories from the collection, optionally filtered by user_id, limited, and sorted."}, {"name": "upsert_memory", "description": "Inserts or updates a memory record, managing versioning and timestamps."}, {"name": "delete_memory", "description": "Deletes a memory record by its 'id'."}, {"name": "drop_table", "description": "Drops the entire collection."}, {"name": "table_exists", "description": "Checks if the collection exists in the database."}, {"name": "clear", "description": "Deletes all records from the collection."}], "calls": ["pymongo.MongoClient", "self.collection.create_index", "self.collection.find_one", "self.collection.update_one", "self.collection.delete_one", "self.collection.drop", "self.db.list_collection_names", "self.collection.delete_many", "logger.error", "log_debug"], "search-terms": ["MongoMemoryDb", "MongoDB collection memory store", "upsert_memory", "memory_exists", "read_memories", "drop_table", "collection indexes"], "state": 2, "file_id": 110, "knowledge_revision": 2364, "git_revision": "9dbbb3aad1441a6e4286c02f3d75b29a74dd3623", "ctags": [], "filename": "libs/agno/agno/memory/v2/db/mongodb.py", "hash": "61825f5ff2051b1e30705ed6a7a77b95", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"2364": "9dbbb3aad1441a6e4286c02f3d75b29a74dd3623"}]}