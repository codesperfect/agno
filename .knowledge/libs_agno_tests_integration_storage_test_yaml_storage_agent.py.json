{"is_source_file": true, "format": "Python", "description": "This file contains unit tests for the YAML storage backend of an agent system, specifically testing storage creation, session management, retrieval, deletion, and filtering functionalities.", "external_files": ["shutil", "pytest", "agno.agent", "agno.storage.session.agent", "agno.storage.yaml"], "external_methods": ["shutil.rmtree", "pytest.fixture", "pytest.raises", "pytest.mark.parametrize", "Agent.run", "Agent.session_id", "AgentStorage.read", "AgentStorage.get_all_sessions", "AgentStorage.delete_session", "AgentStorage.get_all_session_ids", "AgentStorage.drop"], "published": [], "classes": [], "methods": [{"name": "temp_storage_path", "description": "Fixture that creates a temporary directory for storage and cleans it up after tests."}, {"name": "agent_storage", "description": "Fixture that creates a YamlStorage instance for agent sessions."}, {"name": "workflow_storage", "description": "Fixture that creates a YamlStorage instance for workflow sessions."}, {"name": "agent_with_storage", "description": "Fixture that creates an Agent instance with the test storage."}, {"name": "test_storage_creation", "description": "Test that the storage directory is created successfully."}, {"name": "test_agent_session_storage", "description": "Test that agent sessions are properly stored and contain the expected data."}, {"name": "test_multiple_interactions", "description": "Test that multiple interactions are stored correctly within the same session."}, {"name": "test_session_retrieval_by_user", "description": "Test retrieving sessions filtered by user ID."}, {"name": "test_session_deletion", "description": "Test deleting a session and verifying its removal."}, {"name": "test_get_all_session_ids", "description": "Test retrieving all session IDs with various filters."}, {"name": "test_drop_storage", "description": "Test dropping all sessions from storage and verifying cleanup."}], "calls": ["shutil.rmtree", "YamlStorage(dir_path=temp_storage_path)", "YamlStorage(dir_path=temp_storage_path / \"workflows\", mode=\"workflow\")", "Agent(storage=agent_storage, add_history_to_messages=True)", "agent_with_storage.run", "agent_storage.read", "agent_storage.get_all_sessions", "agent_storage.delete_session", "agent_storage.get_all_session_ids", "agent_storage.drop"], "search-terms": ["yaml storage", "agent session tests", "storage directory creation", "session retrieval", "session deletion", "storage cleanup", "agent system testing", "integration tests"], "state": 2, "file_id": 850, "knowledge_revision": 3099, "git_revision": "a545ab73f2d26f0794a5a9519e4cce878519c2ea", "ctags": [], "filename": "libs/agno/tests/integration/storage/test_yaml_storage_agent.py", "hash": "7cc3d1bc66b269c5190b589afc0fd2e2", "format-version": 4, "code-base-name": "https://github.com/codesperfect/agno.git:main", "revision_history": [{"3099": "a545ab73f2d26f0794a5a9519e4cce878519c2ea"}]}